<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.79.0"><meta name=description content="Documentation of GIS for Water"><meta name=author content="Jin IGARASHI"><link rel="shortcut icon" href=/images/favicon.png type=image/x-icon><title>Intergration with UNVT :: Documentation of GIS for Water</title><link href=/css/nucleus.css?1766618892 rel=stylesheet><link href=/css/fontawesome-all.min.css?1766618892 rel=stylesheet><link href=/css/hybrid.css?1766618892 rel=stylesheet><link href=/css/featherlight.min.css?1766618892 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1766618892 rel=stylesheet><link href=/css/auto-complete.css?1766618892 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1766618892 rel=stylesheet><link href=/css/theme.css?1766618892 rel=stylesheet><link href=/css/hugo-theme.css?1766618892 rel=stylesheet><link href=/css/theme-mine.css?1766618892 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1766618892></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/en/unvt/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=/><div style=vertical-align:middle><img src=/images/logo.svg width=64 height=64></div></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1766618892></script><script type=text/javascript src=/js/auto-complete.js?1766618892></script><script type=text/javascript>var baseurl="https:\/\/water-gis.com\/en";</script><script type=text/javascript src=/js/search.js?1766618892></script></div><div class=highlightable><ul class=topics><li data-nav-id=/en/concept/ title=Concept class=dd-item><a href=/en/concept/><b>1. </b>Concept
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/ title=Setups class=dd-item><a href=/en/setups/><b>2. </b>Setups
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/en/setups/preparation/ title=Preparations class=dd-item><a href=/en/setups/preparation/>Preparations
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/en/setups/preparation/install_postgis/ title="Install PostgresSQL/PostGIS database" class=dd-item><a href=/en/setups/preparation/install_postgis/>Install PostgresSQL/PostGIS database
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/preparation/data_collection/ title="Data Collection and Import data into PostGIS database" class=dd-item><a href=/en/setups/preparation/data_collection/>Data Collection and Import data into PostGIS database
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/preparation/install_docker/ title="Install Docker" class=dd-item><a href=/en/setups/preparation/install_docker/>Install Docker
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/en/setups/installation/ title=Installation class=dd-item><a href=/en/setups/installation/>Installation
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/en/setups/installation/create_vt_repository/ title="Create repository for vectortiles" class=dd-item><a href=/en/setups/installation/create_vt_repository/>Create repository for vectortiles
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/installation/create_mbtiles/ title="Create mbtiles from PostGIS" class=dd-item><a href=/en/setups/installation/create_mbtiles/>Create mbtiles from PostGIS
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/installation/design_stylefile/ title="Design Mapbox Style" class=dd-item><a href=/en/setups/installation/design_stylefile/>Design Mapbox Style
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/installation/deploy_vectortiles/ title="Deploy vectortiles to gh-pages" class=dd-item><a href=/en/setups/installation/deploy_vectortiles/>Deploy vectortiles to gh-pages
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/installation/deploy_stylefile_sprite/ title="Deploy Mapbox Stylefiles and Sprite files to gh-pages" class=dd-item><a href=/en/setups/installation/deploy_stylefile_sprite/>Deploy Mapbox Stylefiles and Sprite files to gh-pages
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/installation/develop_mapbox_gl_js/ title="Develop and Deploy Web Application" class=dd-item><a href=/en/setups/installation/develop_mapbox_gl_js/>Develop and Deploy Web Application
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/en/setups/terrain-rgb/ title="Development of Terrain RGB" class=dd-item><a href=/en/setups/terrain-rgb/>Development of Terrain RGB
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/en/setups/terrain-rgb/create_terrainrgb/ title="Create Terrain RGB tile from DEM" class=dd-item><a href=/en/setups/terrain-rgb/create_terrainrgb/>Create Terrain RGB tile from DEM
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/terrain-rgb/host-terrainrgb-tiles/ title="Host Terrain RGB tiles on server" class=dd-item><a href=/en/setups/terrain-rgb/host-terrainrgb-tiles/>Host Terrain RGB tiles on server
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/terrain-rgb/utilize-on-mapboxgl/ title="Utilize Terrain RGB on Mapbox GL JS" class=dd-item><a href=/en/setups/terrain-rgb/utilize-on-mapboxgl/>Utilize Terrain RGB on Mapbox GL JS
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/en/setups/valhalla/ title="Installation of Valhalla API" class=dd-item><a href=/en/setups/valhalla/>Installation of Valhalla API
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/en/setups/valhalla/setup-valhalla/ title="Setup Valhalla" class=dd-item><a href=/en/setups/valhalla/setup-valhalla/>Setup Valhalla
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/valhalla/setup-letencrypt/ title="Setup Let's Encrypt to enable SSL" class=dd-item><a href=/en/setups/valhalla/setup-letencrypt/>Setup Let's Encrypt to enable SSL
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/setups/valhalla/install-valhalla-plugin/ title="Install Valhalla Plugin" class=dd-item><a href=/en/setups/valhalla/install-valhalla-plugin/>Install Valhalla Plugin
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/en/operation/ title=Operations class=dd-item><a href=/en/operation/><b>3. </b>Operations
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/en/operation/automation_updating/ title="Automate data up to date" class=dd-item><a href=/en/operation/automation_updating/>Automate data up to date
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/operation/costs/ title=Costs class=dd-item><a href=/en/operation/costs/>Costs
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/en/operation/costs/costs_ghpages/ title="Hosting Service of GitHub Pages" class=dd-item><a href=/en/operation/costs/costs_ghpages/>Hosting Service of GitHub Pages
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/operation/costs/cost_basemaps/ title="Limitation of Base map from third-party map" class=dd-item><a href=/en/operation/costs/cost_basemaps/>Limitation of Base map from third-party map
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/en/casestudies/ title="Case Studies" class=dd-item><a href=/en/casestudies/><b>4. </b>Case Studies
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/en/casestudies/narok/ title="Narok Water, Kenya" class=dd-item><a href=/en/casestudies/narok/>Narok Water, Kenya
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/casestudies/wasac/ title="WASAC, Rwanda" class=dd-item><a href=/en/casestudies/wasac/>WASAC, Rwanda
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/casestudies/nakuru/ title="Nakuru Water, Kenya" class=dd-item><a href=/en/casestudies/nakuru/>Nakuru Water, Kenya
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/casestudies/nanyuki/ title="Nanyuki Water, Kenya" class=dd-item><a href=/en/casestudies/nanyuki/>Nanyuki Water, Kenya
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/en/packages/ title="Packages and libraries" class=dd-item><a href=/en/packages/><b>5. </b>Packages and libraries
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/en/packages/mapbox-gl-export/ title=mapbox-gl-export class=dd-item><a href=/en/packages/mapbox-gl-export/>mapbox-gl-export
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/packages/mapbox-gl-legend/ title=mapbox-gl-legend class=dd-item><a href=/en/packages/mapbox-gl-legend/>mapbox-gl-legend
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/packages/mapbox-gl-elevation/ title=mapbox-gl-elevation class=dd-item><a href=/en/packages/mapbox-gl-elevation/>mapbox-gl-elevation
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/packages/mapbox-gl-valhalla/ title=mapbox-gl-valhalla class=dd-item><a href=/en/packages/mapbox-gl-valhalla/>mapbox-gl-valhalla
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/packages/mapbox-gl-area-switcher/ title=mapbox-gl-area-switcher class=dd-item><a href=/en/packages/mapbox-gl-area-switcher/>mapbox-gl-area-switcher
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/packages/mapbox-gl-popup/ title=mapbox-gl-popup class=dd-item><a href=/en/packages/mapbox-gl-popup/>mapbox-gl-popup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/packages/mapbox-gl-pitch-toggle-control/ title=mapbox-gl-pitch-toggle-control class=dd-item><a href=/en/packages/mapbox-gl-pitch-toggle-control/>mapbox-gl-pitch-toggle-control
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/packages/mapboxgljs-boilerplate/ title=mapboxgljs-boilerplate class=dd-item><a href=/en/packages/mapboxgljs-boilerplate/>mapboxgljs-boilerplate
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/en/license/ title=License class=dd-item><a href=/en/license/><b>6. </b>License
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/en/unvt/ title="Intergration with UNVT" class="dd-item
parent
active"><a href=/en/unvt/><b>7. </b>Intergration with UNVT
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/watergis/docs><i class="fab fa-fw fa-github"></i>GitHub repo</a></li><li><a class=padding href=https://water-gis.com/en/showcase><i class="fas fa-fw fa-camera"></i>Showcases</a></li><li><a class=padding href=https://water-gis.com/en/tools><i class="fas fa-tools"></i>Third party tools</a></li><li><a class=padding href=https://water-gis.com/en/questions><i class="fas fa-question"></i>Q&A</a></li><li><a class=padding href=https://water-gis.com/en/credits><i class="fas fa-fw fa-bullhorn"></i>Credits</a></li><li><a class=padding href=https://jin-igarashi.me/en><i class="fas fa-address-card"></i>Contacts</a></li><li><a class=padding href=https://water-gis.com/en/privacy-policy>Privacy policy</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value;">
<option id=en value=https://water-gis.com/en/unvt/ selected>English</option>
<option id=ja value=https://water-gis.com/ja/unvt/>日本語</option></select><svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i>Clear History</a></li></ul></section><section id=footer><center><a class=github-button href=https://github.com/watergis/docs data-icon=octicon-star data-show-count=true aria-label="Star watergis/docs on GitHub">Star</a>
<a class=github-button href=https://github.com/watergis/docs/fork data-icon=octicon-repo-forked data-show-count=true aria-label="Fork watergis/docs on GitHub">Fork</a>
<a class=github-button href=https://github.com/sponsors/JinIgarashi aria-label="Sponsor watergis OSS project on GitHub">Sponsor</a><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p><p>Copyright © 2020 Jin IGARASHI</p></center><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/watergis/docs/edit/master/content/unvt/_index.en.md target=blank><i class="fas fa-code-branch"></i><span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span class=links><a href=/en/>GIS for Water</a> > Intergration with UNVT</span></div></div></div><div id=head-tags></div><div id=chapter><div id=body-inner><h3 id=chapter-7>Chapter 7</h3><p>This chapter will show how you can establish completely free OSM based map by using <a href=https://github.com/unvt>United Nations Vector Tiles Toolkits (UNVT)</a>. In Rwanda and Kenya, we are using UNVT as one of base maps which is completeley license free&rsquo;s map generated from Open Street Map.</p><p>If you are suffering for the payment for Google Map, Mapbox, Maptiler or any other map services providers, UNVT would be the great tool for your organization.</p><h4 id=hosting-unvt-map-for-a-country-on-github-pages>Hosting UNVT map for a country on Github pages</h4><p>UNVT is mainly designed for operating on Raspberry Pi, however it can be hosted on Github pages to distribute OSM based vactor tiles. It can produce vector tiles very fast and lightly.</p><p>For hosting on Github pages, you can use <a href=https://github.com/unvt/naru>unvt/naru</a> respository.</p><p>Here, I introduce how to generate by using Docker.</p><h5 id=1-fork-unvtnaru>1. Fork unvt/naru</h5><p>Firstly, you can fork <a href=https://github.com/unvt/naru>unvt/naru</a> on your Github.</p><h5 id=2-setup>2. Setup</h5><p>Firstly, you can install Docker and docker-compose on your computer either Windows, MacOS or Linux. See the instruction <a href=https://docs.docker.com/get-docker/>here</a>.</p><p>Then, you can download the source code from Github, and build Docker image.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh>git clone https://github.com/<span style=color:#f92672>{</span>your organization name<span style=color:#f92672>}</span>/naru.git
cd naru
docker build . --tag unvt/naru
</code></pre></div><h5 id=3-generate-vector-tiles>3. Generate vector tiles</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh>cd naru
docker run -v <span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span>:/usr/src/app -p 9966:9966 -it unvt/naru
<span style=color:#75715e># now you entered into Docker container</span>
cd /usr/src/app
cp .env.example .env
vi .env <span style=color:#75715e># edit environmental variable</span>
</code></pre></div><p>Here, we are going to generate UNVT map for Rwanda in Easern Africa. You can confirm the region and area on <a href=http://download.geofabrik.de>Geofabrik</a>.</p><p>The below is an example of <code>.env</code>.</p><pre><code>REGION=africa
AREA=rwanda
SITE_ROOT=http://localhost:9966
</code></pre><p>Now, you execute the following commands to generate each components for vector tiles map.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh>rake inet:download <span style=color:#75715e># download osm.pbf</span>
rake inet:mbgljs <span style=color:#75715e># download mapbox-gl-js package</span>
rake js <span style=color:#75715e># rollup javascript code</span>
rake inet:sprite <span style=color:#75715e># download maki and build sprite</span>
rake inet:fonts <span style=color:#75715e># download fonts and create glyphs</span>
rake tiles <span style=color:#75715e># create mbtiles under src folder</span>
rake style <span style=color:#75715e># create style.json</span>
</code></pre></div><p>After running the above commands, all of resources will be created under <code>docs</code> folder. <code>docs</code> folder is normally used for Github pages public directory.</p><p>the structure of <code>docs</code> directory should be as below.</p><ul><li>docs<ul><li>glyphs</li><li>js<ul><li>bundle.js</li><li>bundle.js.map</li><li>mapbox-gl.css</li><li>mapbox-gl.js</li></ul></li><li>sprite<ul><li>sprite.json</li><li>sprite.png</li><li><a href=mailto:sprite@2x.json>sprite@2x.json</a></li><li><a href=mailto:sprite@2x.png>sprite@2x.png</a></li><li><a href=mailto:sprite@4x.json>sprite@4x.json</a></li><li><a href=mailto:sprite@4x.png>sprite@4x.png</a></li></ul></li><li>zxy</li><li>glyphs.json</li><li>index.html</li><li>style.json</li></ul></li></ul><p>Now you can ready to check your map on local browser!</p><p>Just run the below command to host tiles by <code>budo</code>.</p><pre><code>rake host
</code></pre><p>open <a href=http://localhost:9966>http://localhost:9966</a> on your browser to check your UNVT map.</p><h5 id=4-uploading-tiles-to-github>4. Uploading tiles to Github</h5><p>If your UNVT map&rsquo;s everything is okay, you can now upload it to Github for publishing.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh>git add docs -f  <span style=color:#75715e># we use -f option to force to commit all documents</span>
git commit -m <span style=color:#e6db74>&#34;generated vectortiles&#34;</span>
git push origin master
</code></pre></div><h5 id=5-make-docs-folder-publish-as-github-pages>5. Make <code>docs</code> folder publish as Github pages</h5><p>Go to <code>settings</code> of your <code>naru</code> repository page, then you can find <code>Github Pages</code> section on <code>Options</code> tab. You can configure github pages there.</p><p>Please also see more detailed information on their public website <a href=https://docs.github.com/en/github/working-with-github-pages/about-github-pages>here</a>.</p><p>After publishing as Github pages, you can access your UNVT map from the URL like <code>https://{your organization}.github.io/naru</code>.</p><p>Also, you can access your all components of map as following.</p><ul><li>Vector Tiles</li></ul><pre><code>https://{your organization}.github.io/naru/zxy/{z}/{x}/{y}.pbf
</code></pre><ul><li>Sprite file</li></ul><pre><code>https://{your organization}.github.io/naru/sprite/sprite
</code></pre><ul><li>Glyphs</li></ul><pre><code>https://{your organization}.github.io/naru/glyphs/{fontstack}/{range}.pbf
</code></pre><h4 id=advanced-development>Advanced development</h4><h5 id=a-interageration-natural-earth-map-for-low-scale-zoom-levels-0---5>a. Interageration Natural Earth Map for low scale zoom levels 0 - 5</h5><p>UNVT&rsquo;s OSM map only generate zoom level 6 to 15. If you need low scale map, you can add Natural Earth based UNVT.</p><p>In order to add Natural Earth Map, you need to modify <code>Rakefile</code> in your repository.</p><ul><li><code>rake inet:download</code> section</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>desc <span style=color:#e6db74>&#39;download source geospatial data to the place&#39;</span>
task <span style=color:#e6db74>:download</span> <span style=color:#66d9ef>do</span>
  <span style=color:#66d9ef>if</span> <span style=color:#f92672>!</span><span style=color:#66d9ef>File</span><span style=color:#f92672>.</span>exist?(<span style=color:#e6db74>&#34;src/</span><span style=color:#e6db74>#{</span><span style=color:#66d9ef>AREA</span><span style=color:#e6db74>}</span><span style=color:#e6db74>-latest.osm.pbf&#34;</span>)
    u <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://download.geofabrik.de/</span><span style=color:#e6db74>#{</span><span style=color:#66d9ef>REGION</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/{</span><span style=color:#e6db74>#{</span><span style=color:#66d9ef>AREA</span><span style=color:#e6db74>}</span><span style=color:#e6db74>-latest.osm.pbf}&#34;</span>
    sh <span style=color:#e6db74>&#34;curl -C - </span><span style=color:#e6db74>#{</span>u<span style=color:#e6db74>}</span><span style=color:#e6db74> --output &#39;./src/#1&#39;&#34;</span>
  <span style=color:#66d9ef>end</span>
  <span style=color:#75715e># add the below command.</span>
  <span style=color:#66d9ef>if</span> <span style=color:#f92672>!</span><span style=color:#66d9ef>File</span><span style=color:#f92672>.</span>exist?(<span style=color:#e6db74>&#34;src/ne_tiles.mbtiles&#34;</span>)
    u <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://watergis.github.io/unvt-ne/{ne_tiles.mbtiles}&#34;</span>
    sh <span style=color:#e6db74>&#34;curl -C - </span><span style=color:#e6db74>#{</span>u<span style=color:#e6db74>}</span><span style=color:#e6db74> --output &#39;./src/#1&#39;&#34;</span>
  <span style=color:#66d9ef>end</span>
<span style=color:#66d9ef>end</span>
</code></pre></div><ul><li><code>rake tiles</code> section</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>desc <span style=color:#e6db74>&#39;build tiles from source data&#39;</span>
task <span style=color:#e6db74>:tiles</span> <span style=color:#66d9ef>do</span>
  sh <span style=color:#e6db74>&#34;osmium export --config osmium-export-config.json --index-type=sparse_file_array --output-format=geojsonseq --output=- src/</span><span style=color:#e6db74>#{</span><span style=color:#66d9ef>AREA</span><span style=color:#e6db74>}</span><span style=color:#e6db74>-latest.osm.pbf | node filter.js | tippecanoe --no-feature-limit --no-tile-size-limit --force --simplification=2 --maximum-zoom=15 --base-zoom=15 --hilbert --output=</span><span style=color:#e6db74>#{</span><span style=color:#66d9ef>MBTILES</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
  <span style=color:#75715e># You need to tile-join tiles.mbtiles and ne_tiles.mbtiles</span>
  sh <span style=color:#e6db74>&#34;tile-join --force --no-tile-compression --output-to-directory=docs/zxy --no-tile-size-limit </span><span style=color:#e6db74>#{</span><span style=color:#66d9ef>MBTILES</span><span style=color:#e6db74>}</span><span style=color:#e6db74> src/ne_tiles.mbtiles&#34;</span>
<span style=color:#66d9ef>end</span>
</code></pre></div><ul><li>add style for Natural Earth layers
You need to add style for additional natural earth layers. You can use the style from this <a href=https://github.com/WASAC/naru/tree/develop/hocon>repository</a>. I indicated the file name start with <code>ne-</code> as Natural Earth layers.</li></ul><p>If you think it is difficult, just simply copy <code>hocon</code> folder from <code>WASAC/naru</code> repository.</p><h5 id=b-automate-to-update-tiles-data-by-using-github-actions>b. Automate to update tiles data by using Github Actions</h5><p><a href=https://github.com/WASAC/naru>WASAC/naru</a> repository is fully adopted Github Actions to automate updating OSM data.</p><p>You can use the same workflow file for your repository.</p><p><a href=https://github.com/WASAC/naru/blob/develop/.github/workflows/deploy.yml>deploy.yaml</a>. This yaml is for updating every two weeks on 1st and 15th each month.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>deploy</span>

<span style=color:#f92672>on</span>:
  <span style=color:#75715e># push:</span>
  <span style=color:#75715e>#   branches: [ develop ]</span>

  <span style=color:#f92672>schedule</span>:
    - <span style=color:#f92672>cron</span>:  <span style=color:#e6db74>&#39;0 0 1,15 * *&#39;</span>

<span style=color:#f92672>jobs</span>:

  <span style=color:#f92672>deploy</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
    <span style=color:#f92672>steps</span>:
    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Generate tiles</span>
      <span style=color:#f92672>env</span>:
        <span style=color:#f92672>REGION</span>: <span style=color:#ae81ff>africa</span>
        <span style=color:#f92672>AREA</span>: <span style=color:#ae81ff>rwanda</span>
        <span style=color:#f92672>SITE_ROOT</span>: <span style=color:#ae81ff>https://wasac.github.io/naru</span>
      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span><span style=color:#e6db74>        </span>        <span style=color:#ae81ff>docker-compose up</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Use Node.js</span>
      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-node@v1</span>
      <span style=color:#f92672>with</span>:
        <span style=color:#f92672>node-version</span>: <span style=color:#ae81ff>12.</span><span style=color:#ae81ff>x</span>
    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>yarn</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>configure git and deploy</span>
      <span style=color:#f92672>env</span>:
        <span style=color:#f92672>NODE_AUTH_TOKEN</span>: <span style=color:#ae81ff>${{secrets.GITHUB_TOKEN}}</span>
        <span style=color:#75715e># below option might be required for large area of the country&#39;s map</span>
        <span style=color:#f92672>NODE_OPTIONS</span>: <span style=color:#e6db74>&#34;--max-old-space-size=8192&#34;</span>
      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span><span style=color:#e6db74>        git config --global user.name &#34;{your organization name}+githubci&#34;
</span><span style=color:#e6db74>        git config --global user.email &#34;{your organization name}+githubci@users.noreply.github.com&#34;
</span><span style=color:#e6db74>        git remote set-url origin https://x-access-token:${NODE_AUTH_TOKEN}@github.com/{your organization name}/naru.git
</span><span style=color:#e6db74>        yarn run deploy</span>        
</code></pre></div><footer class=footline></footer></div></div></div><div id=navigation><a class="nav nav-prev" href=/en/license/ title=License><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/en/concept/ title=Concept style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1766618892></script><script src=/js/perfect-scrollbar.min.js?1766618892></script><script src=/js/perfect-scrollbar.jquery.min.js?1766618892></script><script src=/js/jquery.sticky.js?1766618892></script><script src=/js/featherlight.min.js?1766618892></script><script src=/js/highlight.pack.js?1766618892></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1766618892></script><script src=/js/learn.js?1766618892></script><script src=/js/hugo-learn.js?1766618892></script><link href=/mermaid/mermaid.css?1766618892 rel=stylesheet><script src=/mermaid/mermaid.js?1766618892></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-LG94D1P6JM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-LG94D1P6JM');</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1713474511031393" crossorigin=anonymous></script></body></html>